

# Setting Up an Amazon S3 Bucket

This document guides you through the process of creating an Amazon S3 bucket, configuring CORS policies, and setting permissions for your PDF bill generation and storage.

## Prerequisites

1. **AWS Account**: Ensure you have an AWS account. If you donâ€™t have one, [sign up here](https://aws.amazon.com/free/).
2. **AWS CLI**: Optionally, install the AWS Command Line Interface (CLI) for easier management. [Install AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html).

## Step 1: Create an S3 Bucket

1. **Sign in to the AWS Management Console**.
2. **Navigate to the S3 Service**:
   - Search for "S3" in the AWS Management Console and select it.

3. **Create a New Bucket**:
   - Click on **Create bucket**.
   - **Bucket Name**: Choose a globally unique name (e.g., `ratobucket`).
   - **Region**: Select a region that is closest to your target audience.
   - Click **Create bucket**.

## Step 2: Configure CORS Policy

1. **Select Your Bucket**:
   - Click on the bucket you just created.

2. **Open the Permissions Tab**:
   - Navigate to the **Permissions** tab.

3. **Edit CORS Configuration**:
   - Click on **Edit CORS Configuration**.

4. **Add the Following CORS Configuration**:
   ```xml
   [
     {
       "AllowedHeaders": ["*"],
       "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
       "AllowedOrigins": ["*"],
       "ExposeHeaders": []
     }
   ]
   ```
   - This configuration allows all origins, headers, and methods. You can restrict the `AllowedOrigins` to specific domains later for better security.

5. **Save Changes**.

## Step 3: Set Bucket Permissions

1. **Open the Permissions Tab**:
   - While still in your bucket settings, navigate to the **Permissions** tab.

2. **Edit Bucket Policy**:
   - Click on **Bucket Policy** and add the following policy:
   ```json
   {
     "Version": "2012-10-17",
     "Statement": [
       {
         "Sid": "PublicReadGetObject",
         "Effect": "Allow",
         "Principal": "*",
         "Action": "s3:GetObject",
         "Resource": "arn:aws:s3:::ratobucket/*"
       }
     ]
   }
   ```
   - This policy allows public read access to the objects in your bucket. Modify the `Principal` to limit access to specific IAM roles or users for better security.

3. **Save Changes**.

## Step 4: (Optional) Configure Bucket Versioning

1. **Open the Properties Tab**:
   - Navigate to the **Properties** tab.

2. **Enable Versioning**:
   - Scroll down to the **Bucket Versioning** section and click on **Edit**.
   - Enable versioning if you want to keep multiple versions of your files.

3. **Save Changes**.

## Step 5: Verify Your Bucket

1. **Upload a Test File**:
   - Click on the **Upload** button in your bucket.
   - Upload a sample PDF file to verify that everything works as expected.

2. **Check Permissions**:
   - Try to access the uploaded file using the S3 URL format:
   ```
   https://<bucket-name>.s3.<region>.amazonaws.com/<file-name>
   ```

## Conclusion

You have successfully created an Amazon S3 bucket, configured CORS policies, and set permissions. This bucket will now be ready for storing PDF invoices generated by your application.
